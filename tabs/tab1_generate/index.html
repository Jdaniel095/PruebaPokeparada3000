<!-- tabs/tab1_generate/index.html -->
<div class="sections-wrapper">

  

    <!-- ğŸ’¾ NOMBRE DE SESIÃ“N -->
  <div class="section-card" style="border-left:5px solid #2ecc71;">
    <div class="section-header">
      <h2>ğŸ—‚ï¸ SesiÃ³n Temporal</h2>
    
    </div>

    <div class="section-content">
      <div style="display:flex;flex-wrap:wrap;gap:10px;align-items:center;">
        <input type="text" id="inputNombreSesion" placeholder="Escribe un nombre para la sesiÃ³n..." style="flex:1;min-width:200px;" />
        <button id="btnGuardarSesion" class="primary">ğŸ’¾ Guardar SesiÃ³n Temporal</button>
      </div>
      <p style="margin-top:8px;color:#555;font-size:0.9em;">
        * Recuerda guardar la sesiÃ³n antes de agregar fotos o generar collage.
      </p>
    </div>
  </div>


  <!-- ğŸ–¼ï¸ SECCIÃ“N 1: SELECCIÃ“N DE FOTOS -->
  <div class="section-card">
    <div class="section-header">
      <h2>1.- SelecciÃ³n de Fotos</h2>
      <button class="toggle-btn">âˆ’</button>
    </div>

    <div class="section-content">
      <!-- Controles -->
      <div class="controls-row" style="display:flex;flex-wrap:wrap;gap:10px;align-items:center;">
        <button id="btnRefresh" class="secondary">Refrescar</button>
        <button id="btnSelectAll" class="secondary">Seleccionar todo</button>
        <button id="btnClearPoke" class="poke">Limpiar PokÃ©paradas</button>
        <button id="btnClearAcceso" class="acceso">Limpiar Accesos</button>
        <button id="btnClearAll" class="secondary">Limpiar Todo</button>


        <!-- Contador -->
        <div id="filesCounter" style="margin-left:auto; font-weight:bold; display:flex; gap:12px;">
          <span>Total: 0</span>
          <span style="color:#3498db">PokÃ©paradas: 0</span>
          <span style="color:orange">Accesos: 0</span>
        </div>
      </div>

      <!-- Contenedor de imÃ¡genes -->
      <div id="filesList">
      </div>

      <!-- BotÃ³n guardar -->
      <div style="margin-top:15px;text-align:right;">
        <button id="btnGuardarFotos" class="primary">Guardar Fotos en BD</button>
      </div>
    </div>
  </div>

  <!-- ğŸ¨ SECCIÃ“N 2: COLLAGE -->
  <div class="section-card">
    <div class="section-header">
      <h2>2.- Generador de Collage</h2>
      <button class="toggle-btn">âˆ’</button>
    </div>
    <div class="section-content">
      <p>Genera un collage con las imÃ¡genes guardadas en <b>SesionesTemporales</b>.</p>

      <div style="text-align:center;margin-top:10px;">
        <button id="btnGenerarCollage" class="poke">ğŸ¨ Generar Collage</button>
      </div>

      <div id="collagePreview" style="margin-top:20px;text-align:center;"></div>
    </div>
  </div>


 <!-- ğŸ“ SECCIÃ“N 3: UBICACIONES -->
<div class="section-card">
  <div class="section-header">
    <h2>3.- Guardar Ubicaciones</h2>
    <button class="toggle-btn">âˆ’</button>
  </div>
  <div class="section-content">

    <!-- BotÃ³n principal -->
    <div style="margin-bottom:10px;">
      <button id="btnGuardarCoordenada" class="poke">ğŸ“ Guardar Coordenada Actual</button>
    </div>

    <!-- Contenedor donde aparecerÃ¡n las ubicaciones guardadas -->
    <div id="ubicacionesList" style="display:flex;flex-direction:column;gap:15px;"></div>

  </div>
</div>


<!-- ğŸ“‹ SECCIÃ“N 4: PROPUESTAS -->
<div class="section-card">
  <div class="section-header">
    <h2>4.- Generar Propuestas</h2> <button class="toggle-btn">âˆ’</button>
  </div>
  <div class="section-content">
    
    <div class="modo-propuesta" style="margin-bottom:15px; display:flex; gap: 20px;">
      <label style="cursor:pointer; color: #fff;">
        <input type="radio" name="modoPropuesta" id="modoManual" value="manual" checked>
        Modo Manual
      </label>
      <label style="cursor:pointer; color: #fff;">
        <input type="radio" name="modoPropuesta" id="modoGemini" value="gemini">
        Modo AutomÃ¡tico (Gemini)
      </label>
    </div>

    <div id="contenedorModoManual">
      <p>Pega aquÃ­ las propuestas (tÃ­tulo y descripciÃ³n).</p>
      <textarea id="inputPropuestas" placeholder="Ejemplo:
ğŸ–¼ï¸ Propuesta 1
TÃ­tulo: Parque Central
DescripciÃ³n: ..." 
        style="width:100%;min-height:120px;border-radius:8px;padding:8px;"></textarea>
      <div style="margin-top:10px;text-align:right;">
        <button id="btnGuardarPropuestasManual" class="primary">ğŸ’¾ Guardar Propuestas Manuales</button>
      </div>
    </div>

    <div id="contenedorModoGemini" style="display:none;">
      <p>Se usarÃ¡ el collage de la <b>SecciÃ³n 2</b> para generar las propuestas automÃ¡ticamente.</p>
      <div style="margin-top:10px;text-align:right;">
        <button id="btnGenerarConGemini" class="primary poke">ğŸ¤– Generar y Guardar con IA</button>
      </div>
    </div>

    <div id="listaPropuestas" style="margin-top:20px;display:flex;flex-direction:column;gap:10px;"></div>

  </div>
</div>

<!-- =================================================== -->
<!-- ğŸ§© SECCIÃ“N 5 â€” Mostrar Propuestas -->
<!-- =================================================== -->
<div class="section-card" id="seccion5">
  <div class="section-header">
    <h2>ğŸ“‹ SecciÃ³n 5 â€” Mostrar Propuestas</h2>
    <button class="toggle-btn">âˆ’</button>
  </div>

  <div class="section-content">
    <button id="btnGenerarPropuestas" class="primary">âš™ï¸ Mostrar propuestas</button>
    <p id="contadorPropuestas" style="margin-top:8px;color:#8ff;"></p>

    <!-- Contenedor donde se insertarÃ¡n las tarjetas -->
    <div id="resultadosContainer" style="margin-top:15px;display:flex;flex-direction:column;gap:16px;">

      <!-- ğŸ§© Tarjeta individual de propuesta (EJEMPLO VISUAL) -->
      <div class="tarjeta-propuesta">
        <!-- ğŸ“· Imagen izquierda -->
        <div class="imagen-col">
          <img src="https://via.placeholder.com/400x300" alt="Foto principal">
        </div>

        <!-- ğŸ“ Contenido central -->
        <div class="contenido-col">
          <div class="texto-propuesta">
            <p><b>TÃ­tulo:</b> Parque Sinchi Roca</p>
            <p><b>DescripciÃ³n:</b> Amplio parque con Ã¡reas verdes, juegos y esculturas representativas de la cultura local.</p>
            <p><b>DescripciÃ³n para Wayfarer:</b> Lugar emblemÃ¡tico del distrito, ideal como punto de encuentro para los entrenadores.</p>
          </div>

          <!-- ğŸ“ Stats centrados -->
          <div class="stats">
            <p>ğŸ“ Lat: -11.987654 | Lng: -77.045321</p>
          </div>

          <!-- ğŸ”˜ Botones en fila -->
          <div class="acciones">
            <button class="btnCopiarTitulo">Copiar TÃ­tulo</button>
            <button class="btnCopiarDescripcion">Copiar DescripciÃ³n</button>
            <button class="btnCopiarWayfarer">Copiar Wayfarer</button>
          </div>
        </div>

        <!-- ğŸ—ºï¸ Mapa derecha -->
        <div class="mapa-col">
          <iframe src="https://www.google.com/maps?q=-11.987654,-77.045321&z=17&output=embed" loading="lazy"></iframe>
        </div>
      </div>
      <!-- Fin tarjeta -->
    </div>
  </div>
</div>


    

    <!-- Modal para mapa -->
    <div id="modalMapaSat"
         style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;
         background:rgba(0,0,0,0.8);align-items:center;justify-content:center;z-index:9999;">
      <div style="position:relative;width:90%;height:90%;">
        <iframe id="iframeMapaSat" style="width:100%;height:100%;border:none;border-radius:8px;"></iframe>
        <button onclick="document.getElementById('modalMapaSat').style.display='none';"
                style="position:absolute;top:10px;right:10px;padding:8px 12px;background:white;
                border:none;border-radius:4px;cursor:pointer;">âŒ Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal para ver mapa interactivo -->
<div id="modalMap" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;
 background:rgba(0,0,0,0.8);align-items:center;justify-content:center;z-index:9999">
  <div style="position:relative;width:90%;height:90%">
    <div id="leafletMap" style="width:100%;height:100%;border:3px solid white;border-radius:8px"></div>
    <button onclick="closeMap()" style="position:absolute;top:10px;right:10px;padding:6px 10px;
     background:#fff;border:none;border-radius:4px;cursor:pointer">âŒ Cerrar</button>
  </div>
</div>


<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
</script>



<!-- ğŸ”— Vincular JS especÃ­fico de esta pestaÃ±a -->
<script src="../js/tab1_generate.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    if (window.initTab1) window.initTab1();
  });
</script>

