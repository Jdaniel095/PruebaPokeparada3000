<!-- tabs/tab1_generate/index.html -->
<div class="sections-wrapper">

  

    <!-- ğŸ’¾ NOMBRE DE SESIÃ“N -->
  <div class="section-card" style="border-left:5px solid #2ecc71;">
    <div class="section-header">
      <h2>ğŸ—‚ï¸ SesiÃ³n Temporal</h2>
    
    </div>

    <div class="section-content">
      <div style="display:flex;flex-wrap:wrap;gap:10px;align-items:center;">
        <input type="text" id="inputNombreSesion" placeholder="Escribe un nombre para la sesiÃ³n..." style="flex:1;min-width:200px;" />
        <button id="btnGuardarSesion" class="primary">ğŸ’¾ Guardar SesiÃ³n Temporal</button>
      </div>
      <p style="margin-top:8px;color:#555;font-size:0.9em;">
        * Recuerda guardar la sesiÃ³n antes de agregar fotos o generar collage.
      </p>
    </div>
  </div>


  <!-- ğŸ–¼ï¸ SECCIÃ“N 1: SELECCIÃ“N DE FOTOS -->
  <div class="section-card">
    <div class="section-header">
      <h2>1.- SelecciÃ³n de Fotos</h2>
      <button class="toggle-btn">âˆ’</button>
    </div>

    <div class="section-content">
      <!-- Controles -->
      <div class="controls-row" style="display:flex;flex-wrap:wrap;gap:10px;align-items:center;">
        <button id="btnRefresh" class="secondary">Refrescar</button>
        <button id="btnSelectAll" class="secondary">Seleccionar todo</button>
        <button id="btnClearPoke" class="poke">Limpiar PokÃ©paradas</button>
        <button id="btnClearAcceso" class="acceso">Limpiar Accesos</button>
        <button id="btnClearAll" class="secondary">Limpiar Todo</button>


        <!-- Contador -->
        <div id="filesCounter" style="margin-left:auto; font-weight:bold; display:flex; gap:12px;">
          <span>Total: 0</span>
          <span style="color:#3498db">PokÃ©paradas: 0</span>
          <span style="color:orange">Accesos: 0</span>
        </div>
      </div>

      <!-- Contenedor de imÃ¡genes -->
      <div id="filesList">
      </div>

      <!-- BotÃ³n guardar -->
      <div style="margin-top:15px;text-align:right;">
        <button id="btnGuardarFotos" class="primary">Guardar Fotos en BD</button>
      </div>
    </div>
  </div>

  <!-- ğŸ¨ SECCIÃ“N 2: COLLAGE -->
  <div class="section-card">
    <div class="section-header">
      <h2>2.- Generador de Collage</h2>
      <button class="toggle-btn">âˆ’</button>
    </div>
    <div class="section-content">
      <p>Genera un collage con las imÃ¡genes guardadas en <b>SesionesTemporales</b>.</p>

      <div style="text-align:center;margin-top:10px;">
        <button id="btnGenerarCollage" class="poke">ğŸ¨ Generar Collage</button>
      </div>

      <div id="collagePreview" style="margin-top:20px;text-align:center;"></div>
    </div>
  </div>


 <!-- ğŸ“ SECCIÃ“N 3: UBICACIONES -->
<div class="section-card">
  <div class="section-header">
    <h2>3.- Guardar Ubicaciones</h2>
    <button class="toggle-btn">âˆ’</button>
  </div>
  <div class="section-content">

    <!-- BotÃ³n principal -->
    <div style="margin-bottom:10px;">
      <button id="btnGuardarCoordenada" class="poke">ğŸ“ Guardar Coordenada Actual</button>
    </div>

    <!-- Contenedor donde aparecerÃ¡n las ubicaciones guardadas -->
    <div id="ubicacionesList" style="display:flex;flex-direction:column;gap:15px;"></div>

  </div>
</div>


<!-- ğŸ“‹ SECCIÃ“N 4: PROPUESTAS -->
<div class="section-card">
  <div class="section-header">
    <h2>4.- Generar Propuestas</h2> <button class="toggle-btn">âˆ’</button>
  </div>
  <div class="section-content">
    
    <div class="modo-propuesta" style="margin-bottom:15px; display:flex; gap: 20px;">
      <label style="cursor:pointer; color: #fff;">
        <input type="radio" name="modoPropuesta" id="modoManual" value="manual" checked>
        Modo Manual
      </label>
      <label style="cursor:pointer; color: #fff;">
        <input type="radio" name="modoPropuesta" id="modoGemini" value="gemini">
        Modo AutomÃ¡tico (Gemini)
      </label>
    </div>

    <div id="contenedorModoManual">
      <p>Pega aquÃ­ las propuestas (tÃ­tulo y descripciÃ³n).</p>
      <textarea id="inputPropuestas" placeholder="Ejemplo:
ğŸ–¼ï¸ Propuesta 1
TÃ­tulo: Parque Central
DescripciÃ³n: ..." 
        style="width:100%;min-height:120px;border-radius:8px;padding:8px;"></textarea>
      <div style="margin-top:10px;text-align:right;">
        <button id="btnGuardarPropuestasManual" class="primary">ğŸ’¾ Guardar Propuestas Manuales</button>
      </div>
    </div>

    <div id="contenedorModoGemini" style="display:none;">
      <p>Se usarÃ¡ el collage de la <b>SecciÃ³n 2</b> para generar las propuestas automÃ¡ticamente.</p>
      <div style="margin-top:10px;text-align:right;">
        <button id="btnGenerarConGemini" class="primary poke">ğŸ¤– Generar y Guardar con IA</button>
      </div>
    </div>

    <div id="listaPropuestas" style="margin-top:20px;display:flex;flex-direction:column;gap:10px;"></div>

  </div>
</div>

<!-- =================================================== -->
<!-- ğŸ§© SECCIÃ“N 5 â€” Mostrar Propuestas -->
<!-- =================================================== -->
<div class="section-card" id="seccion5">
  <div class="section-header">
    <h2>ğŸ“‹ SecciÃ³n 5 â€” Mostrar Propuestas</h2>
    <button class="toggle-btn">âˆ’</button>
  </div>

  <div class="section-content">
    <button id="btnGenerarPropuestas" class="primary">âš™ï¸ Mostrar propuestas</button>
    <p id="contadorPropuestas" style="margin-top:8px;color:#8ff;"></p>

    <!-- Contenedor donde se insertarÃ¡n las tarjetas -->
    <div id="resultadosContainer" style="margin-top:15px;display:flex;flex-direction:column;gap:16px;">

  
   
      <!-- Fin tarjeta -->
    </div>
  </div>
</div>


    

 <!-- MODAL MAPA (selector de coordenadas) -->
<div id="mapModal" class="modal-map" style="display:none;">
  <div class="modal-map-content">
    <div id="map-canvas" class="modal-map-iframe"></div>
    <div class="modal-map-buttons">
      <button id="map-btn-guardar" class="primary">Guardar ubicaciÃ³n</button>
      <button id="map-btn-cancelar" class="poke">Cancelar</button>
    </div>
  </div>
</div>

<!-- MODAL EDITAR (simple para Tab 1) -->
<div id="modal-editar" class="modal-editar">
  <div class="modal-editar-contenido">
    <span id="modal-editar-cerrar" class="modal-editar-cerrar">&times;</span>
    <h2>Editar Propuesta</h2>
    <p class="subtexto-modal">Actualiza los campos y, si deseas, elige una ubicaciÃ³n en el mapa.</p>
    <hr>

    <div class="form-group">
      <label for="t1-edit-titulo">TÃ­tulo</label>
      <input type="text" id="t1-edit-titulo" placeholder="TÃ­tulo de la propuesta">
    </div>

    <div class="form-group">
      <label for="t1-edit-descripcion">DescripciÃ³n</label>
      <input type="text" id="t1-edit-descripcion" placeholder="DescripciÃ³n (2-3 lÃ­neas)">
    </div>

    <div class="form-group">
      <label for="t1-edit-wayfarer">DescripciÃ³n para Wayfarer</label>
      <input type="text" id="t1-edit-wayfarer" placeholder="Resumen para jugadores">
    </div>

    <div class="form-group">
      <label for="t1-edit-coordenadas">Coordenadas (lat, lng)</label>
      <div class="form-row-reubicacion">
        <input type="text" id="t1-edit-coordenadas" placeholder="-11.999999, -77.111111">
        <button id="t1-edit-abrir-mapa" class="secondary btn-ver-mapa">Elegir en mapa</button>
      </div>
    </div>

    <div class="modal-editar-botones">
      <button id="t1-btn-guardar-edicion" class="btn-primario">Guardar cambios</button>
      <button id="t1-btn-cancelar-edicion" class="btn-secundario">Cancelar</button>
    </div>
  </div>
</div>


</div>


<!-- âœ… MODAL PARA VER MAPA SATELITAL (GRANDE) -->
<!-- âœ… MODAL DE MAPA ADAPTADO DE TAB2 -->
<div id="mapModalMiniatura" class="modal" style="display:none;">
  <div class="modal-content">
    <span id="mapMiniatura-btn-cerrar" class="modal-close">&times;</span>
    <h2>Vista de UbicaciÃ³n</h2>
    <div id="map-canvas-miniatura" style="width:100%; height:400px; border-radius:12px;"></div>
  </div>
</div>

  </div>
</div>


<script>
document.getElementById("cerrarMapaSat").onclick = () => {
  document.getElementById("modalMapaSat").style.display = "none";
};
</script>
